(this.webpackJsonpvote_react=this.webpackJsonpvote_react||[]).push([[0],{171:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(28),i=a.n(s),r=a(16),o=a(21),l=a(25),j=a.n(l),d=a(22),b=a(37),p=a(29),x=a.n(p),u=a(254),h=a(54),O=a(258),m=a(259),v=a(260),g=a(41),f=a(3),y=Object(c.createContext)();function N(e){var t=e.children,a=I({url:"/account/current-user"});return Object(f.jsx)(y.Provider,{value:a,children:t})}var w=a(255),k=a(256),C=a(257);a(171);function _(e){e.userInfo;var t=Object(o.g)();return Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"main_container",children:[Object(f.jsxs)("div",{className:"mainHead",children:[Object(f.jsx)(w.a,{id:"goback",onClick:function(e){t.goBack()},style:{fontSize:"24px"}}),"Machine's Vote"]}),Object(f.jsx)("div",{className:"requireLogin",children:Object(f.jsxs)("div",{className:"pleaselogin",children:[Object(f.jsx)("img",{src:"img/logo.jfif",alt:"please login",className:"pleaselogin_img"}),Object(f.jsx)("p",{className:"p",children:"\u8bf7\u767b\u5f55Machine's vote"}),Object(f.jsx)("p",{className:"p",children:"\u4ee5\u4fdd\u8bc1\u5404\u9879\u529f\u80fd\u53ef\u4ee5\u6b63\u5e38\u7684\u4f7f\u7528"}),Object(f.jsx)(r.c,{to:"/login",children:Object(f.jsx)(h.a,{type:"primary",style:{width:"240px",marginTop:"20px"},children:"\u767b\u5f55"})})]})}),Object(f.jsxs)("div",{className:"mainFooter",children:[Object(f.jsx)(r.c,{to:"/main/newvote",id:"newvote",children:Object(f.jsx)(k.a,{style:{fontSize:"28px",cursor:"pointer"}})}),Object(f.jsx)(r.c,{to:"/main/vote",id:"vote",children:Object(f.jsx)(C.a,{style:{fontSize:"28px",cursor:"pointer"}})}),Object(f.jsx)(r.c,{to:"/main/mine",id:"mine",children:Object(f.jsx)(O.a,{style:{fontSize:"28px",cursor:"pointer",color:"rgb(37, 109, 243)"}})})]})]})})}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(c.useState)(e),a=Object(g.a)(t,2),n=a[0],s=a[1],i=Object(c.useCallback)((function(e){s(e.target.value)}),[]);return{value:n,onChange:i}}function I(e){var t=Object(c.useState)(),a=Object(g.a)(t,2),n=a[0],s=a[1],i=Object(c.useState)(null),r=Object(g.a)(i,2),o=r[0],l=r[1],j=Object(c.useState)(!0),b=Object(g.a)(j,2),p=b[0],u=b[1],h=Object(c.useState)(0),O=Object(g.a)(h,2),m=O[0],v=O[1];Object(c.useEffect)((function(){var t=x.a.CancelToken.source();return x()(Object(d.a)(Object(d.a)({},e),{},{CancelToken:t.token})).then((function(e){0===e.data.code?(s(e.data.result),l(null)):l(e.data.msg),u(!1)})).catch((function(e){l(e.toString()),u(!1)})),function(){t.cancel()}}),[e.url,m]);var f=Object(c.useCallback)((function(){u(!0),v((function(e){return e+1}))}),[]);return{data:n,loading:p,error:o,Updata:f}}function z(){return Object(c.useContext)(y)}function M(e){return function(t){var a=z();return a.loading?null:a.error?(console.log(a),Object(f.jsx)(_,{userInfo:a})):Object(f.jsx)(e,Object(d.a)(Object(d.a)({},t),{},{userInfo:a}))}}var B=function(){var e=S(),t=S(),a=S(),c=Object(o.g)();function n(){return(n=Object(b.a)(j.a.mark((function n(){var s,i,r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={name:e.value,password:t.value,captcha:a.value.toLocaleLowerCase()},n.prev=1,n.next=4,x.a.post("/account/login",s);case 4:-1===(i=n.sent).data.code?alert(i.data.msg):(c.push("/main"),window.location.reload(!0)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),r=n.t0.response.data,alert(r.msg);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))).apply(this,arguments)}function s(){return(s=Object(b.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:"visiter",password:"1",captcha:""},e.prev=1,e.next=4,x.a.post("/account/login",t);case 4:e.sent,c.push("/main"),window.location.reload(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a=e.t0.response.data,console.log(a.msg);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"login_card",children:[Object(f.jsx)("img",{src:"img/logo.jfif",alt:"please login",className:"pleaselogin_img",style:{marginBottom:"40px"}}),Object(f.jsxs)("div",{style:{fontSize:"15px"},children:["\u8fd8\u6ca1\u6709\u8d26\u53f7\uff1f\u70b9\u51fb",Object(f.jsx)(r.c,{to:"/register",children:"\u6ce8\u518c"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)(u.a,Object(d.a)({style:{width:"260px"},placeholder:"\u7528\u6237\u540d",prefix:Object(f.jsx)(O.a,{}),type:"text"},e))]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)(u.a,Object(d.a)({style:{width:"260px"},placeholder:"\u5bc6\u7801",prefix:Object(f.jsx)(m.a,{}),type:"password"},t))]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"captcha_container",children:[Object(f.jsx)(u.a,Object(d.a)({style:{width:"160px"},placeholder:"\u9a8c\u8bc1\u7801",prefix:Object(f.jsx)(v.a,{}),type:"text"},a)),Object(f.jsx)("img",{style:{width:"95px",marginLeft:"5px",height:"30px"},src:"/account/captcha-img",alt:"\u9a8c\u8bc1\u7801"})]})]}),Object(f.jsx)("div",{style:{marginTop:"30px",marginBottom:"15px"},children:Object(f.jsx)(h.a,{style:{width:"260px"},type:"primary",className:"logbutton",onClick:function(){return n.apply(this,arguments)},children:"\u767b\u5f55"})}),Object(f.jsx)(h.a,{style:{width:"260px"},type:"primary",className:"logbutton",onClick:function(){return s.apply(this,arguments)},children:"\u6e38\u5ba2\u8d26\u53f7\u767b\u5f55"})]})})},D=a(261);var L=function(){var e=S(),t=S(),a=S(),c=S(),n=Object(o.g)();function s(){return(s=Object(b.a)(j.a.mark((function s(){var i,r,o;return j.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i={name:e.value,password:t.value,email:a.value,captcha:c.value.toLocaleLowerCase()},s.prev=1,s.next=4,x.a.post("/account/register",i);case 4:-1===(r=s.sent).data.code?alert(r.data.msg):n.push("/login"),s.next=12;break;case 8:s.prev=8,s.t0=s.catch(1),o=s.t0.response.data,alert(o.msg);case 12:case"end":return s.stop()}}),s,null,[[1,8]])})))).apply(this,arguments)}return Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"login_card",children:[Object(f.jsx)("img",{src:"img/logo.jfif",alt:"please login",className:"pleaselogin_img",style:{marginBottom:"40px"}}),Object(f.jsxs)("div",{style:{fontSize:"15px"},children:["\u5df2\u6709\u8d26\u53f7\uff1f\u70b9\u51fb",Object(f.jsx)(r.c,{to:"/login",children:"\u767b\u5f55"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)(u.a,Object(d.a)({style:{width:"260px"},placeholder:"\u7528\u6237\u540d",prefix:Object(f.jsx)(O.a,{}),type:"text"},e))]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)(u.a,Object(d.a)({style:{width:"260px"},placeholder:"\u5bc6\u7801",prefix:Object(f.jsx)(m.a,{}),type:"password"},t))]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)(u.a,Object(d.a)({style:{width:"260px"},placeholder:"\u7535\u5b50\u90ae\u7bb1",prefix:Object(f.jsx)(D.a,{}),type:"text"},a))]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"captcha_container",children:[Object(f.jsx)(u.a,Object(d.a)({style:{width:"160px"},placeholder:"\u9a8c\u8bc1\u7801",prefix:Object(f.jsx)(v.a,{}),type:"text"},c)),Object(f.jsx)("img",{style:{width:"95px",marginLeft:"5px",height:"30px"},src:"/account/captcha-img",alt:"\u9a8c\u8bc1\u7801"})]})]}),Object(f.jsx)("div",{style:{marginTop:"30px"},children:Object(f.jsx)(h.a,{style:{width:"260px"},type:"primary",className:"logbutton",onClick:function(){return s.apply(this,arguments)},children:"\u6ce8\u518c"})})]})})},V=(a(176),a(177),a.p+"static/media/1.c2f82d27.png"),T=a.p+"static/media/2.b07f7509.png";function F(){return Object(f.jsxs)(c.Fragment,{children:[Object(f.jsx)("div",{className:"card",children:Object(f.jsxs)(r.b,{to:"/create-vote",children:[Object(f.jsx)("img",{className:"card-img",alt:"\u5355\u9009",src:V}),Object(f.jsx)(h.a,{type:"primary",style:{width:"240px"},children:"\u5355\u9009\u6295\u7968"})]})}),Object(f.jsx)("div",{className:"line"}),Object(f.jsx)("div",{className:"card",children:Object(f.jsxs)(r.b,{to:"/create-vote?multiple=1",children:[Object(f.jsx)("img",{className:"card-img",alt:"\u591a\u9009",src:T}),Object(f.jsx)(h.a,{type:"primary",style:{width:"240px"},children:"\u591a\u9009\u6295\u7968"})]})})]})}var U=a(262);a(178);function E(){var e=I({url:"/all-vote"}),t=e.loading,a=e.data,c=e.error,n=Object(o.g)(),s=null!==a&&void 0!==a?a:[];return t?Object(f.jsx)("div",{className:"Vote"}):c?void alert(c):Object(f.jsx)("div",{className:"Vote",children:s.map((function(e){return Object(f.jsxs)("div",{className:"vote_card",onClick:function(){var t;t=e.voteId,n.push("/view-vote/".concat(t))},children:[Object(f.jsx)("div",{className:"vote_card_title",children:e.title}),Object(f.jsxs)("div",{className:"lalala",children:[Object(f.jsxs)("span",{style:{color:"rgb(24, 144, 255)"},children:["[",e.multiple?"\u591a\u9009":"\u5355\u9009","]"]}),"\xa0",Object(f.jsxs)("span",{style:{color:"rgb(24, 144, 255)"},children:["[",e.anonymous?"\u533f\u540d\u6295\u7968":"\u516c\u5f00\u6295\u7968","]"]})]}),Object(f.jsxs)("div",{className:"vote_card_end",children:[Object(f.jsxs)("div",{className:"vote_card_creater",children:["\u521b\u5efa\u8005\uff1a",e.name]}),Object(f.jsx)("img",{style:{width:"35px",height:"35px",borderRadius:"50%"},src:e.avatar,alt:"avatar"})]})]})}))})}var A=a(133),H=a(134),R=a(147),Y=a(144),J=a(143),P=a(253);function q(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}function W(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||J.b.error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<2;return a||J.b.error("Image must smaller than 2MB!"),t&&a}var G=function(e){Object(R.a)(a,e);var t=Object(Y.a)(a);function a(){var e;Object(A.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={loading:!1},e.handleChange=function(t){"uploading"!==t.file.status?"done"===t.file.status&&q(t.file.originFileObj,(function(t){return e.setState({imageUrl:t,loading:!1})})):e.setState({loading:!0})},e}return Object(H.a)(a,[{key:"render",value:function(){var e=this.state,t=(e.loading,e.imageUrl),a=Object(f.jsx)("div",{children:Object(f.jsx)("img",{src:this.props.avatar,alt:"avatar",style:{width:"110px",height:"110px",borderRadius:"50%"}})});return Object(f.jsx)(P.a,{style:{marginTop:8,width:"120px",height:"120px",borderRadius:"50% !important",backgroundColor:"yello"},name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/upload",beforeUpload:W,onChange:this.handleChange,children:t?Object(f.jsx)("img",{src:t,alt:"avatar",style:{width:"115px",height:"110px",borderRadius:"50%"}}):a})}}]),a}(n.a.Component),Q=G;a(246);var K=M((function(e){var t=e.userInfo;function a(){return(a=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/account/logout");case 3:e.sent,window.location.reload(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t=e.t0.response.data,console.log(t.msg);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return console.log(t),Object(f.jsx)("div",{className:"Mine_container",children:Object(f.jsxs)("div",{className:"Mine",children:[Object(f.jsx)(Q,{style:{width:"120px",height:"120px",margin:"0"},avatar:t.data.avatar}),Object(f.jsx)("span",{style:{marginBottom:"20px",fontSize:"14px"},children:"upload avatar"}),Object(f.jsxs)("p",{children:["username: ",t.data.name]}),Object(f.jsxs)("p",{children:["email: ",t.data.email]}),Object(f.jsx)(h.a,{style:{width:"260px"},type:"primary",className:"logbutton",onClick:function(){return a.apply(this,arguments)},children:"\u9000\u51fa\u767b\u5f55"})]})})}));a(247);var X=function(){return Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"main",children:[Object(f.jsxs)("div",{className:"mainHead",children:[Object(f.jsx)("img",{src:"img/logo.jfif",alt:"",className:"logo2",style:{width:"55px",height:"55px",position:"absolute",left:"-12px",top:"-2px"}}),"Machine's Vote",Object(f.jsx)(r.c,{exact:!0,to:"/",id:"mainhome",children:Object(f.jsx)(U.a,{style:{fontSize:"28px"}})})]}),Object(f.jsx)("div",{className:"routers",children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{path:"/main",exact:!0,children:Object(f.jsx)(o.a,{to:"/main/vote"})}),Object(f.jsx)(o.b,{path:"/main/vote",component:E,exact:!0}),Object(f.jsx)(o.b,{path:"/main/newvote",component:F}),Object(f.jsx)(o.b,{path:"/main/mine",component:K})]})}),Object(f.jsxs)("div",{className:"mainFooter",children:[Object(f.jsx)(r.c,{to:"/main/newvote",id:"newvote",children:Object(f.jsx)(k.a,{style:{fontSize:"28px",cursor:"pointer"}})}),Object(f.jsx)(r.c,{to:"/main/vote",id:"vote",children:Object(f.jsx)(C.a,{style:{fontSize:"28px",cursor:"pointer"}})}),Object(f.jsx)(r.c,{to:"/main/mine",id:"mine",children:Object(f.jsx)(O.a,{style:{fontSize:"28px",cursor:"pointer"}})})]})]})})};var Z=function(){var e=Object(o.g)();function t(){return(t=Object(b.a)(j.a.mark((function t(){var a,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={name:"visiter",password:"1",captcha:""},t.prev=1,t.next=4,x.a.post("/account/login",a);case 4:t.sent,e.push("/main"),window.location.reload(!0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),c=t.t0.response.data,console.log(c.msg);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"home",children:[Object(f.jsx)("div",{className:"logo1",children:Object(f.jsx)("img",{src:"img/logo.jfif",alt:"",className:"logo2"})}),Object(f.jsx)("p",{className:"name",children:"Machine's Vote"}),Object(f.jsx)("div",{className:"slogan",id:"slogan",onClick:function(){e.push("/main")},children:Object(f.jsx)("p",{className:"slogan2",id:"slogan2",children:"Voting!"})}),Object(f.jsxs)("div",{className:"buttons",children:[Object(f.jsx)(r.b,{className:"button1",to:"/login",children:"Login"}),Object(f.jsx)(r.b,{className:"button1",to:"/register",children:"signUp"}),Object(f.jsx)(r.b,{className:"button1",onClick:function(){return t.apply(this,arguments)},children:"\u6e38\u5ba2\u8bbf\u95ee"})]}),Object(f.jsxs)("footer",{className:"footer",children:[Object(f.jsx)("p",{className:"footer2",children:"Welcome"}),Object(f.jsxs)("p",{className:"footer2",children:["\xa92021 Machine \xa0 \u7d20\u6750\u6765\u6e90 ",Object(f.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://image.baidu.com/search/index?tn=baiduimage&ct=201326592&lm=-1&cl=2&ie=gb18030&word=%C4%C7%D2%BB%C4%EA%CE%D2%C3%C7%B6%FE%CA%AE%C6%DF%B0%CB%CB%EA%CD%BC%C6%AC&fr=ala&ala=1&alatpl=normal&pos=0&dyTabStr=MCwzLDYsNCwxLDUsNyw4LDIsOQ%3D%3D",children:"\u90a3\u4e00\u5e74\u6211\u4eec\u4e8c\u5341\u516d\u4e03"})," \xa0 \u4f5c\u8005:Machine"]})]})]})})};var $=function(){return Object(f.jsxs)(c.Fragment,{children:[Object(f.jsx)("div",{className:"background",id:"background"}),Object(f.jsx)("div",{className:"yinghua",id:"yinghua"}),Object(f.jsx)("div",{className:"background2",id:"background2"})]})},ee=a(252),te=a(263),ae=a(264),ce=a(100);a(248);function ne(e){return Object(f.jsxs)("div",{className:"CheckBox_ios",children:[Object(f.jsx)("input",{type:"checkbox",onChange:e.onChange,name:"ios-checkbox",className:"ios",id:e.id}),Object(f.jsx)("label",{className:"ios",htmlFor:e.id,children:Object(f.jsx)("div",{className:"ios"})})]})}a(249);var se=M((function(){var e=Object(c.useState)(["",""]),t=Object(g.a)(e,2),a=t[0],n=t[1],s=S(),i=S(),l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(c.useState)(e),a=Object(g.a)(t,2),n=a[0],s=a[1],i=Object(c.useCallback)((function(e){s(e.target.checked)}),[]);return{checked:n,onChange:i}}(),p=Object(o.g)(),O=function(){var e=Object(o.h)().search;return Object(c.useMemo)((function(){return new URLSearchParams(e)}),[e])}(),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(c.useState)(e),a=Object(g.a)(t,2),n=a[0],s=a[1],i=Object(c.useCallback)((function(e){s(e)}),[]);return{value:n,onChange:i}}();function v(){return(v=Object(b.a)(j.a.mark((function e(){var t,c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:s.value,desc:i.value,options:a,deadline:m.value,anonymous:l.checked,multiple:"1"===O.get("multiple")},console.log(t),e.prev=2,e.next=5,x.a.post("/vote",t);case 5:c=e.sent,n=c.data.result,console.log(n),p.push("/main/vote"),window.location.reload(!0),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(2),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"main_container",children:[Object(f.jsxs)("div",{className:"mainHead",children:[Object(f.jsx)(r.c,{exact:!0,to:"/main/newvote",id:"tonewvote",children:Object(f.jsx)(w.a,{style:{fontSize:"24px"}})}),"Machine's Vote"]}),Object(f.jsxs)("div",{className:"options",children:[Object(f.jsx)("div",{className:"votetitle",children:Object(f.jsx)(u.a,Object(d.a)(Object(d.a)({},s),{},{style:{fontSize:"26px",height:"60px"},bordered:!1,type:"text",placeholder:"\u6295\u7968\u6807\u9898"}))}),Object(f.jsx)("div",{className:"votetitle",children:Object(f.jsx)(u.a,Object(d.a)(Object(d.a)({},i),{},{style:{fontSize:"20px",height:"50px"},bordered:!1,type:"text",placeholder:"\u8865\u5145\u63cf\u8ff0"}))}),a.map((function(e,t){return Object(f.jsxs)("div",{className:"option",children:[Object(f.jsx)(te.a,{onClick:function(e){return function(e){n(Object(ce.a)(a,(function(t){t.splice(e,1)})))}(t)},className:"jian"}),Object(f.jsx)(u.a,{onChange:function(e){return function(e,t){n(Object(ce.a)(a,(function(a){a[e]=t})))}(t,e.target.value)},value:e,style:{},bordered:!1,type:"text",placeholder:"\u9009\u9879"})]},t)})),Object(f.jsxs)("div",{onClick:function(){n(Object(ce.a)(a,(function(e){e.push("")})))},className:"tianjia",children:[Object(f.jsx)(ae.a,{className:"jia"}),Object(f.jsx)("span",{style:{marginLeft:"10px"},children:"\u6dfb\u52a0\u9009\u9879"})]})]}),Object(f.jsx)("div",{className:"line",style:{height:"30px"}}),Object(f.jsxs)("div",{className:"others",children:[Object(f.jsxs)("div",{className:"other",children:[Object(f.jsx)("div",{className:"CreateVote_text",children:"\u622a\u6b62\u65e5\u671f"}),Object(f.jsx)(ee.a,Object(d.a)(Object(d.a)({},m),{},{style:{cursor:"pointer"},bordered:!1}))]}),Object(f.jsxs)("div",{className:"other",children:[Object(f.jsx)("div",{className:"CreateVote_text",children:"\u533f\u540d\u6295\u7968"}),Object(f.jsx)(ne,Object(d.a)(Object(d.a)({},l),{},{id:"ios1"}))]}),Object(f.jsxs)("div",{className:"other",children:[Object(f.jsx)("div",{className:"CreateVote_text",children:"\u9650\u5236\u4f20\u64ad"}),Object(f.jsx)(ne,{id:"ios2"})]})]}),Object(f.jsx)(h.a,{onClick:function(){return v.apply(this,arguments)},type:"primary",style:{width:"350px",marginTop:"30px"},children:"\u53d1\u5e03\u6295\u7968"})]})})})),ie=a(108),re=a.n(ie),oe=a(142),le=a.n(oe);a(250);function je(){var e,t=Object(o.i)().voteId,a=I({url:"/vote/".concat(t)}),n=a.loading,s=a.data,i=(a.error,a.Update,Object(c.useState)()),l=Object(g.a)(i,2),d=l[0],p=l[1],u=z(),h=Object(o.g)();function O(){return(O=Object(b.a)(j.a.mark((function e(a){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.error){e.next=3;break}return h.push("/main/mine"),e.abrupt("return");case 3:if(!(Date.now()>new Date(s.vote.deadline).getTime())){e.next=6;break}return alert("\u8be5\u6295\u7968\u5df2\u622a\u6b62\uff0c\u65e0\u6cd5\u7ee7\u7eed\u6295\u7968"),e.abrupt("return");case 6:return c=a.optionId,e.next=9,x.a.post("/vote/".concat(t),{optionId:c});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(u),Object(c.useEffect)((function(){if(!(n||Date.now()>new Date(s.vote.deadline).getTime())){var e="".concat(window.location.protocol.replace("http","ws"),"//").concat(window.location.host,"/realtime-voteinfo/").concat(t),a=new WebSocket(e);return a.onmessage=function(e){var t=JSON.parse(e.data);console.log("\u4ecewebsocket\u83b7\u53d6\u5230\u7684\u5b9e\u65f6\u6295\u7968\u4fe1\u606f",t),p(t)},function(){return a.close()}}}),[n,t]);var m=null!==(e=null!==d&&void 0!==d?d:null===s||void 0===s?void 0:s.userVotes)&&void 0!==e?e:[],v=Object(c.useMemo)((function(){return re.a.groupBy(m,"optionId")}),[m]),y=Object(c.useMemo)((function(){return re.a.uniqBy(m,"userId").length}),[m]);return console.log(y),n?Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"main_container",children:[Object(f.jsxs)("div",{className:"mainHead",children:[Object(f.jsx)(r.c,{exact:!0,to:"/main/vote",id:"tonewvote",children:Object(f.jsx)(w.a,{style:{fontSize:"24px"}})}),"Machine's Vote"]}),Object(f.jsx)("div",{className:"vote_footer"})]})}):Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"main_container",children:[Object(f.jsxs)("div",{className:"mainHead",children:[Object(f.jsx)(r.c,{exact:!0,to:"/main/vote",id:"tonewvote",children:Object(f.jsx)(w.a,{style:{fontSize:"24px"}})}),"Machine's Vote"]}),Object(f.jsxs)("div",{className:"title_container",children:[Object(f.jsx)("div",{className:"bigtitle",children:s.vote.title}),Object(f.jsx)("div",{className:"detail",children:s.vote.desc}),Object(f.jsxs)("div",{className:"other_info",children:[Object(f.jsxs)("span",{style:{color:"rgb(24, 144, 255)"},children:["[",s.vote.multiple?"\u591a\u9009":"\u5355\u9009","]"]}),"\xa0",Object(f.jsxs)("span",{style:{color:"rgb(24, 144, 255)"},children:["[",s.vote.anonymous?"\u533f\u540d\u6295\u7968":"\u516c\u5f00\u6295\u7968","]"]})]})]}),Object(f.jsx)("div",{className:"options_container",children:s.options.map((function(e){var t=v[e.optionId]||[];return Object(f.jsxs)("div",{className:"option_container",children:[Object(f.jsxs)("div",{className:"option_title",style:{cursor:"pointer"},onClick:function(){return function(e){return O.apply(this,arguments)}(e)},children:[Object(f.jsxs)("div",{className:"option_title_main",children:[Object(f.jsxs)("span",{style:{width:"250px",wordWrap:"break-word"},children:[e.content,u.data&&t.some((function(e){return e.userId===u.data.userId}))?"\u2714\ufe0f":""]}),Object(f.jsxs)("div",{style:{fontSize:"13px",display:"flex"},children:[Object(f.jsxs)("span",{className:"spanleft",children:[t.length,"\u7968"]}),Object(f.jsxs)("span",{className:"spanright",children:[0===y?0:(t.length/y*100).toFixed(1),"%"]})]})]}),Object(f.jsx)("div",{className:"option_title_percent",style:{width:"".concat(0===y?0:t.length/y*100*3.6,"px")}})]}),Object(f.jsx)("div",{className:"option_userImg",children:t.map((function(e){return Object(f.jsx)("img",{className:"user-img",src:e.avatar},e.userId)}))})]},e.optionId)}))}),Object(f.jsxs)("div",{className:"vote_deadline",children:["\u6295\u7968\u622a\u81f3\uff1a",le()(s.vote.deadline).format("YYYY-MM-DD HH:mm")]}),Object(f.jsx)("div",{className:"vote_footer"})]})})}function de(){return Object(f.jsx)(N,{children:Object(f.jsx)(r.a,{children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{path:"/",component:Z,exact:!0}),Object(f.jsx)(o.b,{path:"/login",component:B}),Object(f.jsx)(o.b,{path:"/register",component:L}),Object(f.jsx)(o.b,{path:"/main",component:X}),Object(f.jsx)(o.b,{path:"/create-vote",component:se}),Object(f.jsx)(o.b,{path:"/view-vote/:voteId",component:je}),Object(f.jsx)(o.b,{path:"/requirelogin",component:_})]}),Object(f.jsx)($,{})]})})})}i.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(de,{})}),document.getElementById("root"))}},[[251,1,2]]]);
//# sourceMappingURL=main.06b96251.chunk.js.map